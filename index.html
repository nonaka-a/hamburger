<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ゴールデン バーガー</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@800&family=Kiwi+Maru:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="fixed-container">
        <!-- 設定ボタン -->
        <button id="settings-icon">
            <svg viewBox="0 0 512 512" width="24" height="24">
                <path d="M487.4 315.7l-42.6-24.6c3.8-23.2 3.8-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-3.8 23.2-3.8 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z" fill="currentColor"/>
            </svg>
        </button>

        <!-- ショップボタン -->
        <button id="shop-button">
            <img src="images/shop-icon.png" alt="ショップ">
        </button>

        <div id="settings-panel">
            <h3>設定</h3>
            <div class="settings-row">
                <span>ズーム:</span>
                <button id="zoom-out-button">－</button>
                <button id="zoom-in-button">＋</button>
            </div>
            <button id="fullscreen-button">全画面表示</button>
            <button id="sound-toggle-button" class="sound-on">音: オン</button>
            <button id="bgm-change-button" style="display:none;">BGM変更</button>
            <button id="close-settings-button">とじる</button>
        </div>

        <!-- ショップ画面（モーダル） -->
        <div id="shop-modal" class="modal-overlay">
            <div class="game-panel" id="shop-panel">
                <h2>ショップ</h2>
                <div id="shop-items-container">
                    <!-- JSで商品を生成 -->
                </div>
                <button id="close-shop-button">とじる</button>
            </div>
        </div>

        <!-- BGM選択モーダル -->
        <div id="bgm-select-modal" class="modal-overlay">
            <div class="game-panel" style="width: 400px; text-align: center;">
                <h3>音楽をえらんでね</h3>
                <div id="bgm-list" style="display:flex; flex-direction:column; gap:10px; margin:20px 0;">
                    <button class="bgm-option" data-index="0">たのしい曲</button>
                    <button class="bgm-option" data-index="1">ジャズな曲</button>
                    <button class="bgm-option" data-index="2">おしゃれな曲</button>
                </div>
                <button id="close-bgm-modal">とじる</button>
            </div>
        </div>

        <div id="title-screen">
            <div class="title-container">
                <img class="title-logo" src="images/logo.png" alt="ゴールデンバーガー ロゴ">
                <button id="start-button">ゲームスタート！</button>
            </div>
        </div>

        <div id="game-wrapper">
            <div id="status-bar">
                おかね: <span id="money">0</span>円
            </div>
            
            <div id="main-area">
                <div id="customer-message">（お客さんを待っています...）</div>

                <div id="customer-area">
                    <div id="order-bubble"><h3>ご注文はこちら！</h3><ul id="order-list"></ul></div>
                </div>

                <div id="kitchen-display-area">
                    <!-- お客さん画像より前に配置 -->
                    <img id="jukebox-object" src="images/jukebox.png" alt="ジュークボックス" style="display:none;">
                    <img id="customer-image" src="" alt="お客さん">
                    <img id="foreground-counter" src="images/counter.png" alt="カウンター">
                    <div id="creation-display">
                        <div id="burger-stack"></div>
                        <div id="drink-display-container"><div id="drink-display"><span>（のみもの）</span></div></div>
                    </div>
                    <div id="minigame-dock">
                        <div id="grill-minigame" class="minigame-container">
                            <h3>パティを焼こう！</h3>
                            <p>ベストなタイミングでストップ！</p>
                            <div id="grill-visuals">
                                <img id="grill-pan-image" src="images/frying-pan.png" alt="フライパン">
                                <img id="grill-item-image" src="" alt="焼いている食材">
                            </div>
                            <div class="grill-meter-bar">
                                <div class="grill-zone excellent"></div>
                                <div class="grill-zone good"></div>
                                <div class="grill-zone bad"></div>
                                <div id="grill-cursor" class="grill-cursor"></div>
                            </div>
                            <button id="grill-stop-button">ここでストップ！</button>
                        </div>
                        <div id="pour-minigame" class="minigame-container">
                            <h3>色のところでストップ！</h3>
                            <div class="pour-glass">
                                <div id="pour-liquid" class="pour-liquid"></div>
                                <div class="pour-zone excellent"></div>
                                <div class="pour-zone good"></div>
                            </div>
                            <button id="pour-button">ながおし</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="counter-area">
                <div class="counter-body">
                    <div id="action-buttons">
                        <button id="serve-button">できた！</button>
                        <button id="undo-button">ひとつ戻す</button>
                        <button id="trash-button">すてる</button>
                        <button id="show-restock-button">しいれ</button>
                    </div>
                    <div class="selection-panels">
                        <div id="ingredients-panel"></div>
                        <div id="drinks-panel"></div>
                    </div>
                </div>
            </div>

            <div id="completed-burger-modal" class="modal-overlay"></div>
        </div>
        
        <div id="restock-game-modal" class="modal-overlay">
            <div id="restock-selection-screen" class="restock-game-panel">
                <h2>食材を選んでください (最大3種類)</h2>
                <div id="restock-item-list"></div>
                <div id="restock-selection-footer">
                    <button id="restock-cancel-selection-button">やめる</button>
                    <div id="restock-summary">
                        <p>合計費用: <span id="restock-total-cost">0</span>円</p>
                    </div>
                    <button id="restock-confirm-selection-button" disabled>けってい</button>
                </div>
            </div>
        
            <div id="restock-confirm-popup" class="modal-overlay" style="display: none; background-color: rgba(0,0,0,0.7);">
                <div class="game-panel" style="width: 500px; text-align: center;">
                    <p id="restock-confirm-message" style="font-size: 1.3em; margin-bottom: 30px;">合計 〇〇円を支払って<br>仕入れゲームを始めますか？</p>
                    <div style="display: flex; justify-content: center; gap: 20px;">
                        <button id="restock-pay-button" class="action-button-style">支払う</button>
                        <button id="restock-cancel-button" class="action-button-style">やめる</button>
                    </div>
                </div>
            </div>
        
            <div id="restock-minigame-screen" class="restock-game-panel" style="display: none;">
                <div id="minigame-hud">
                    <div id="minigame-timer">30</div>
                    <div id="minigame-realtime-score"></div>
                    <button id="restock-abort-button">ちゅうだん</button>
                </div>
                <canvas id="catch-game-canvas" width="800" height="500"></canvas>
            </div>
        
            <div id="restock-result-screen" class="restock-game-panel" style="display: none;">
                <h2>ゲットした食材：お店には10こまでしかおけないよ</h2>
                <div id="restock-result-list"></div>
                <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
                    <button id="restock-again-button">もう一度仕入れ</button>
                    <button id="restock-return-to-game-button">お店に戻る</button>
                </div>
            </div>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="game-core.js"></script>
    <script src="game-sound.js"></script>
    <script src="game-ui.js"></script>
    <script src="game-logic.js"></script>
    <script src="game-minigames.js"></script>
    <script src="main.js"></script>
</body>
</html>